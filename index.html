<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jeff Forgeron‚Äôs Weather Desk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 20px;
      background: #1f2933;
      color: #111;
    }

    /* ---------- OBS COLUMN ---------- */
    .obs-column {
      position: fixed;
      top: 14px;
      left: 14px;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 11px;
      color: #e5e7eb;
      line-height: 1.35;
      z-index: 1000;
    }

    .obs-row {
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      margin-bottom: 4px;
    }

    .obs-row:last-child {
      margin-bottom: 0;
    }

    .obs-city {
      font-weight: 600;
      min-width: 70px;
    }

    .obs-temp {
      font-weight: 600;
    }

    .obs-dew {
      font-size: 10px;
      color: #9ca3af;
    }

    .obs-wind {
      font-size: 10px;
      color: #cbd5f5;
    }

    .obs-icon {
      width: 14px;
      text-align: center;
    }

    /* ---------- TIME BAR ---------- */
    .time-bar {
      display: flex;
      justify-content: center;
      gap: 28px;
      font-size: 13px;
      color: #e5e7eb;
      letter-spacing: 0.6px;
      font-variant-numeric: tabular-nums;
      margin-bottom: 12px;
    }

    h1 {
      text-align: center;
      margin-bottom: 6px;
      color: #f9fafb;
    }

    .subtitle {
      text-align: center;
      color: #9ca3af;
      margin-bottom: 26px;
      font-size: 15px;
    }

    .top-row {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .panel {
      flex: 1 1 480px;
      background: #e5e7eb;
      border: 1px solid #c7c9cc;
      border-radius: 10px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.35);
      display: flex;
      flex-direction: column;
    }

    .panel.full {
      flex: 1 1 100%;
      margin-top: 20px;
    }

    .panel-title {
      padding: 10px 12px;
      font-size: 14px;
      font-weight: 600;
      background: #dde1e6;
      border-bottom: 1px solid #c7c9cc;
      border-radius: 10px 10px 0 0;
    }

    .image-box {
      height: 440px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #dfe3e8;
    }

    .image-box img {
      max-width: 100%;
      max-height: 100%;
    }

    .controls {
      padding: 10px 12px;
      background: #e9ebee;
      border-top: 1px solid #c7c9cc;
      font-size: 13px;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      border-radius: 0 0 10px 10px;
    }

    .radar-id {
      font-style: italic;
      color: #555;
      white-space: nowrap;
    }

    select, button {
      font-size: 13px;
    }
  </style>
</head>

<body>

<!-- üå§Ô∏è WEST COAST OBS -->
<div class="obs-column" id="obsColumn"></div>

<!-- ‚è±Ô∏è TIME BAR -->
<div class="time-bar" id="timeBar"></div>

<h1>Jeff Forgeron‚Äôs Weather Desk</h1>
<div class="subtitle">A clean, no-nonsense forecast desk.</div>

<!-- (Satellite, Radar, Temp Map remain unchanged below ‚Äî omitted here for brevity in explanation) -->
<!-- KEEP YOUR EXISTING PANELS EXACTLY AS THEY ARE -->

<script>
/* ---------- TIME ---------- */
function updateTimes() {
  const n = new Date();
  const f = tz => n.toLocaleTimeString("en-US", {
    timeZone: tz,
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    hour12: false
  });
  document.getElementById("timeBar").innerHTML = `
    <span>PT ${f("America/Los_Angeles")}</span>
    <span>MT ${f("America/Denver")}</span>
    <span>CT ${f("America/Chicago")}</span>
    <span>ET ${f("America/New_York")}</span>
    <span>UTC ${n.toISOString().slice(11,19)}Z</span>
  `;
}
setInterval(updateTimes, 1000);
updateTimes();

/* ---------- OBS DATA ---------- */
const obsSites = [
  { city: "Seattle",  icao: "KSEA" },
  { city: "Portland", icao: "KPDX" },
  { city: "San Fran", icao: "KSFO" },
  { city: "L.A.",     icao: "KLAX" },
  { city: "Palm Spr", icao: "KPSP" },
  { city: "San Diego",icao: "KSAN" }
];

function skyIcon(code) {
  if (!code) return "‚Äî";
  if (code.includes("TS")) return "‚õàÔ∏è";
  if (code.includes("SN")) return "‚ùÑÔ∏è";
  if (code.includes("RA")) return "üåßÔ∏è";
  if (code.includes("FG")) return "üå´Ô∏è";
  if (code.includes("OVC")) return "‚òÅÔ∏è";
  if (code.includes("BKN")) return "‚õÖ";
  if (code.includes("SCT")) return "üå§Ô∏è";
  if (code.includes("CLR") || code.includes("SKC")) return "‚òÄÔ∏è";
  return "üå•Ô∏è";
}

async function updateObs() {
  let html = "";
  for (const s of obsSites) {
    try {
      const r = await fetch(`https://aviationweather.gov/api/data/metar?ids=${s.icao}&format=json`);
      const d = (await r.json())[0];

      const temp = Math.round(d.temp_c * 9/5 + 32);
      const dew  = Math.round(d.dewpoint_c * 9/5 + 32);
      const wind = d.wind_speed_kt
        ? Math.round(d.wind_speed_kt * 1.15) + " mph"
        : "Calm";

      html += `
        <div class="obs-row">
          <span class="obs-icon">${skyIcon(d.wx_string || d.clouds || "")}</span>
          <span class="obs-city">${s.city}</span>
          <span class="obs-temp">${temp}¬∞</span>
          <span class="obs-dew">dp ${dew}¬∞</span>
          <span class="obs-wind">${wind}</span>
        </div>`;
    } catch {
      html += `
        <div class="obs-row">
          <span class="obs-icon">‚Äî</span>
          <span class="obs-city">${s.city}</span>
          <span>‚Äî</span>
        </div>`;
    }
  }
  document.getElementById("obsColumn").innerHTML = html;
}

updateObs();
setInterval(updateObs, 300000);
</script>

</body>
</html>
