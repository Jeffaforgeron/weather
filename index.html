<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jeff Forgeron’s Weather Desk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 20px;
      background: linear-gradient(180deg, #f4f6f8 0%, #ffffff 60%);
      color: #111;
    }

    h1 {
      text-align: center;
      margin-bottom: 6px;
    }

    .subtitle {
      text-align: center;
      color: #555;
      margin-bottom: 26px;
      font-size: 15px;
    }

    .top-row {
      display: flex;
      gap: 14px;
      flex-wrap: wrap;
    }

    .panel {
      flex: 1 1 480px;
      background: #fafafa;
      border: 1px solid #ddd;
      border-radius: 6px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
      display: flex;
      flex-direction: column;
    }

    .panel-title {
      padding: 8px 10px;
      font-size: 14px;
      font-weight: 600;
      background: #eeeeee;
      border-bottom: 1px solid #ddd;
      border-radius: 6px 6px 0 0;
    }

    .image-box {
      height: 440px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
    }

    .image-box img {
      max-width: 100%;
      max-height: 100%;
    }

    .controls {
      padding: 8px 10px;
      background: #f7f7f7;
      border-top: 1px solid #ddd;
      font-size: 13px;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      border-radius: 0 0 6px 6px;
    }

    .radar-id {
      font-style: italic;
      color: #555;
      white-space: nowrap;
    }

    select, button {
      font-size: 13px;
    }
  </style>
</head>

<body>

<h1>Jeff Forgeron’s Weather Desk</h1>
<div class="subtitle">A clean, no-nonsense forecast desk.</div>

<div class="top-row">

  <!-- SATELLITE -->
  <div class="panel">
    <div class="panel-title">Satellite</div>

    <a id="satLink" target="_blank">
      <div class="image-box">
        <img id="satImage"
             src="https://cdn.star.nesdis.noaa.gov/GOES18/ABI/SECTOR/pnw/GEOCOLOR/latest.jpg">
      </div>
    </a>

    <div class="controls">
      Region:
      <select id="satRegion" onchange="updateSatellite()">
        <option value="pnw">Pacific Northwest</option>
        <option value="wus">West U.S.</option>
        <option value="gwas">CONUS</option>
        <option value="psw">Southwest U.S.</option>
      </select>

      <button onclick="setSatMode('GEOCOLOR')">True Color</button>
      <button onclick="setSatMode('NTMICROPHYSICS')">Nighttime Microphysics</button>
    </div>
  </div>

  <!-- RADAR -->
  <div class="panel">
    <div class="panel-title">Radar</div>

    <div class="image-box">
      <img id="radarImage"
           src="https://radar.weather.gov/ridge/standard/KRTX_loop.gif">
    </div>

    <div class="controls">
      Region:
      <select id="regionSelect" onchange="handleRegionChange()"></select>

      State:
      <select id="stateSelect" onchange="populateRadars()"></select>

      Radar:
      <select id="radarSelect" onchange="changeRadar(this.value)"></select>

      <span id="radarId" class="radar-id">KRTX</span>
    </div>
  </div>

</div>

<script>
let satBand = "GEOCOLOR";

/* ---------- SATELLITE ---------- */
function updateSatellite() {
  const r = satRegion.value;
  if (r === "gwas" && satBand === "GEOCOLOR")
    satImage.src = "https://cdn.star.nesdis.noaa.gov/GOES18/ABI/SECTOR/gwas/GEOCOLOR/1800x1080.jpg";
  else if (r === "psw" && satBand === "GEOCOLOR")
    satImage.src = "https://cdn.star.nesdis.noaa.gov/GOES18/ABI/SECTOR/psw/GEOCOLOR/1200x1200.jpg";
  else
    satImage.src = `https://cdn.star.nesdis.noaa.gov/GOES18/ABI/SECTOR/${r}/${satBand}/latest.jpg`;

  satLink.href =
    `https://www.star.nesdis.noaa.gov/goes/sector_band.php?sat=G18&sector=${r}&band=${satBand}&length=12`;
}

function setSatMode(band) {
  satBand = band;
  updateSatellite();
}

/* ---------- RADAR DATA ---------- */
const radarRegions = {
  "CONUS": [],
  "Northwest": ["WA", "OR", "ID", "MT"],
  "Southwest": ["CA", "NV", "AZ", "UT", "NM"],
  "Northern Plains": ["ND", "SD", "NE", "WY"],
  "Southern Plains": ["TX", "OK", "KS"],
  "Midwest": ["MN", "IA", "MO", "WI", "IL", "IN", "MI", "OH"],
  "Southeast": ["AR", "LA", "MS", "AL", "TN", "KY", "GA", "FL", "SC", "NC"],
  "Northeast": ["PA", "NJ", "NY", "CT", "RI", "MA", "VT", "NH", "ME", "MD", "DE", "VA", "WV"]
};

const regionLoops = {
  "Northwest": "https://radar.weather.gov/ridge/standard/PACNORTHWEST_loop.gif",
  "Southwest": "https://radar.weather.gov/ridge/standard/PACSOUTHWEST_loop.gif",
  "Southern Plains": "https://radar.weather.gov/ridge/standard/SOUTHPLAINS_loop.gif",
  "Northern Plains": "https://radar.weather.gov/ridge/standard/UPPERMISSVLY_loop.gif",
  "Northeast": "https://radar.weather.gov/ridge/standard/NORTHEAST_loop.gif",
  "Southeast": "https://radar.weather.gov/ridge/standard/SOUTHEAST_loop.gif"
};

const radarSites = {
  "WA":[["KATX","Seattle"],["KLGX","Langley Hill"],["KOTX","Spokane"]],
  "OR":[["KRTX","Portland"],["KMAX","Medford"]],
  "ID":[["KCBX","Boise"]],
  "MT":[["KTFX","Great Falls"],["KGGW","Glasgow"],["KMSX","Missoula"]],
  "CA":[["KDAX","Sacramento"],["KMUX","San Jose"],["KHNX","Hanford"],["KSOX","Santa Ana"],["KVTX","Los Angeles"],["KNKX","San Diego"],["KVBX","Vandenberg"]],
  "NV":[["KRGX","Reno"],["KLRX","Elko"]],
  "AZ":[["KIWA","Phoenix"],["KEMX","Tucson"],["KFSX","Flagstaff"]],
  "UT":[["KICX","Cedar City"]],
  "NM":[["KABX","Albuquerque"],["KFDX","Cannon AFB"]],
  "ND":[["KBIS","Bismarck"],["KMBX","Minot"]],
  "SD":[["KFSD","Sioux Falls"],["KABR","Aberdeen"]],
  "NE":[["KOAX","Omaha"],["KUEX","Hastings"],["KLNX","North Platte"]],
  "WY":[["KCYS","Cheyenne"],["KRIW","Riverton"]],
  "TX":[["KFWS","Fort Worth"],["KHGX","Houston"],["KBRO","Brownsville"],["KAMA","Amarillo"],["KLBB","Lubbock"]],
  "OK":[["KTLX","Oklahoma City"],["KINX","Tulsa"],["KFDR","Frederick"]],
  "KS":[["KICT","Wichita"],["KDDC","Dodge City"],["KTWX","Topeka"]],
  "MN":[["KMPX","Minneapolis"],["KDLH","Duluth"]],
  "IA":[["KDMX","Des Moines"],["KDVN","Davenport"]],
  "MO":[["KLSX","St. Louis"],["KEAX","Kansas City"]],
  "WI":[["KMKX","Milwaukee"],["KGRB","Green Bay"]],
  "IL":[["KLOT","Chicago"],["KILX","Lincoln"]],
  "IN":[["KIND","Indianapolis"],["KIWX","N. Indiana"]],
  "MI":[["KDTX","Detroit"],["KGRR","Grand Rapids"]],
  "OH":[["KCLE","Cleveland"],["KILN","Wilmington"]],
  "AR":[["KLZK","Little Rock"]],
  "LA":[["KLCH","Lake Charles"],["KSHV","Shreveport"]],
  "MS":[["KDGX","Jackson"]],
  "AL":[["KBMX","Birmingham"],["KHTX","Huntsville"],["KMOB","Mobile"]],
  "TN":[["KOHX","Nashville"],["KNQA","Memphis"]],
  "KY":[["KLVX","Louisville"],["KPAH","Paducah"]],
  "GA":[["KFFC","Atlanta"]],
  "FL":[["KJAX","Jacksonville"],["KTBW","Tampa"],["KMLB","Melbourne"],["KAMX","Miami"]],
  "SC":[["KCAE","Columbia"]],
  "NC":[["KRAX","Raleigh"],["KLTX","Wilmington"]],
  "PA":[["KPBZ","Pittsburgh"],["KCCX","State College"]],
  "NJ":[["KDIX","Mt Holly"]],
  "NY":[["KBUF","Buffalo"],["KOKX","NYC"],["KENX","Albany"]],
  "CT":[["KBOX","Hartford"]],
  "MA":[["KBOX","Boston"]],
  "VT":[["KBTV","Burlington"]],
  "NH":[["KGYX","Gray"]],
  "ME":[["KGYX","Gray"],["KCAR","Caribou"]],
  "MD":[["KLWX","Washington DC"]],
  "DE":[["KDOX","Dover"]],
  "VA":[["KAKQ","Wakefield"],["KFCX","Blacksburg"]],
  "WV":[["KRLX","Charleston"]]
};

/* ---------- RADAR FUNCTIONS ---------- */
function populateRegions() {
  Object.keys(radarRegions).forEach(region => {
    let o = document.createElement("option");
    o.value = region;
    o.textContent = region;
    regionSelect.appendChild(o);
  });
}

function handleRegionChange() {
  if (regionSelect.value === "CONUS") {
    stateSelect.disabled = true;
    radarSelect.disabled = true;
    radarImage.src = "https://radar.weather.gov/ridge/standard/CONUS-LARGE_loop.gif";
    radarId.textContent = "CONUS";
    return;
  }

  stateSelect.disabled = false;
  radarSelect.disabled = false;

  stateSelect.innerHTML = `<option value="">— Select State —</option>`;
  radarSelect.innerHTML = `<option value="">— Select City —</option>`;

  radarImage.src = regionLoops[regionSelect.value];
  radarId.textContent = regionSelect.value;

  radarRegions[regionSelect.value].forEach(state => {
    let o = document.createElement("option");
    o.value = state;
    o.textContent = state;
    stateSelect.appendChild(o);
  });
}

function populateRadars() {
  if (!stateSelect.value) return;

  radarSelect.innerHTML = `<option value="">— Select City —</option>`;

  radarSites[stateSelect.value].forEach(site => {
    let o = document.createElement("option");
    o.value = site[0];
    o.textContent = `${site[1]}, ${stateSelect.value}`;
    radarSelect.appendChild(o);
  });
}

function changeRadar(id) {
  if (!id) return;
  radarId.textContent = id;
  radarImage.src = `https://radar.weather.gov/ridge/standard/${id}_loop.gif`;
}

/* ---------- INIT ---------- */
populateRegions();
regionSelect.value = "Northwest";
handleRegionChange();
updateSatellite();
</script>

</body>
</html>
